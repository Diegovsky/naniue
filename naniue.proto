syntax = "proto3";
package naniue;
// option go_package = "../naniue.proto;naniue";

message Empty{}

service Wpp {
  rpc Login(LoginReq) returns (LoginRes);
  rpc GetContacts(BaseReq) returns (Contacts);
  rpc GetContact(GetContactReq) returns (Contact);
  rpc SendMessage(SendMessageReq) returns (Empty);
  rpc SubscribeMessages(BaseReq) returns (stream Message);
}

message BaseReq {
  string user_pn = 1;
}

message Contacts {
  repeated Contact contacts=1;
}

message GetContactReq {
  BaseReq base = 1;
  string contact = 2;
}

enum AuthMethod {
  QR_CODE=0;
}

message AuthCode {
  AuthMethod type = 1;
  string value = 2;
}

message Error {
  string message=1;
}

message LoginRes {
  oneof result {
    AuthCode code = 1;
    Error error = 2;
    Empty alive = 3;
  }
}

message LoginReq {
  BaseReq base = 1;
}


message Contact {
  string name=1;
  string pn=2;
  string jid=3;
}

message SendMessageReq {
  BaseReq base=1;
  string to_jid=2;
  string message=3;
}

message Message {
  string from_jid=1;
  string chat_id=2;
  string message=3;
  bool is_forwarded=4;
}
